
upstream cas-server {
	server 127.0.0.1:8090;
}

map $http_upgrade $connection_upgrade {
        		default upgrade;
       		 ''      close;
   	 }
upstream compute-server {
	server 127.0.0.1:8087;
}
upstream enroll-server {
	server 127.0.0.1:8086;
}

upstream data {
	server 127.0.0.1:8088;
}

upstream admin-server {
        server 127.0.0.1:8081;
}

upstream bi-server {
        server 127.0.0.1:8000;
}

upstream bi-vue {
        server 127.0.0.1:9536;
}
upstream biarea-vue {
        server 127.0.0.1:9531;
}
upstream report-vue1 {
        server 127.0.0.1:9532;
}

upstream enroll-vue {
        server 127.0.0.1:9533;
}

# upstream enroll-vue-h5 {
#        server 127.0.0.1:9535;
# }

upstream admin-vue {
        server 127.0.0.1:9528;
}

upstream data-vue {
         server 127.0.0.1:9525;
}

upstream portal-vue{
         server 127.0.0.1:9534;
}

upstream portal{
         server 127.0.0.1:8086;
}

upstream table-vue{
         server 127.0.0.1:9530;
}

upstream table{
         server 127.0.0.1:8898;
}

upstream paas-vue{
         server 127.0.0.1:9524;
}

upstream paas-vue-h5{
         server 127.0.0.1:9520;
}
upstream paas-server{
         server 127.0.0.1:16880;
}

upstream test-vue {
	server 127.0.0.1:9588;
}

upstream hy-bi {
	server 127.0.0.1:9633;
}

#admin-vue
server {
	listen       9528;
	server_name  localhost;
	root /usr/local/vue-project/admin;
	location / {
			root   /usr/local/vue-project/admin;
			index  index.html index.htm;
	}
	error_page   500 502 503 504  /50x.html;
	location = /50x.html {
			root   html;
	}
}

#data-governace-vue
server {
	listen       9525;
	server_name  localhost;
	root /usr/local/vue-project/data-governance;
	location / {
			root   /usr/local/vue-project/data-governance;
			index  index.html index.htm;
	}
	error_page   500 502 503 504  /50x.html;
	location = /50x.html {
			root   html;
	}
}

#data-portal-vue
server {
	listen       9534;
	server_name  localhost;
	root /usr/local/vue-project/portal;
	location / {
			root   /usr/local/vue-project/portal;
			index  index.html index.htm;
	}
	error_page   500 502 503 504  /50x.html;
	location = /50x.html {
			root   html;
	}
}


#table-vue
server {
	listen       9530;
	server_name  localhost;
	root /usr/local/vue-project/table;
	location / {
			root   /usr/local/vue-project/table;
			index  index.html index.htm;
	}
	error_page   500 502 503 504  /50x.html;
	location = /50x.html {
			root   html;
	}
}

#bi-vue
server {
	listen       9536;
	server_name  localhost;
	root /usr/local/vue-project/bi;
	location / {
			root   /usr/local/vue-project/bi;
			index  index.html index.htm;
	}
	error_page   500 502 503 504  /50x.html;
	location = /50x.html {
			root   html;
	}
}
#bi-vue
server {
	listen       9531;
	server_name  localhost;
	root /usr/local/vue-project/biarea;
	location / {
			root   /usr/local/vue-project/biarea;
			index  index.html index.htm;
	}
	error_page   500 502 503 504  /50x.html;
	location = /50x.html {
			root   html;
	}
}

#report-vue1
server {
	listen       9532;
	server_name  localhost;
	root /usr/local/vue-project/report;
	location / {
			root   /usr/local/vue-project/report;
			index  index.html index.htm;
	}
	error_page   500 502 503 504  /50x.html;
	location = /50x.html {
			root   html;
	}
}

#enroll-vue
server {
	listen       9533;
	server_name  localhost;
	root /usr/local/vue-project/enroll;
	location / {
			root   /usr/local/vue-project/enroll;
			index  index.html index.htm;
	}
	error_page   500 502 503 504  /50x.html;
	location = /50x.html {
			root   html;
	}
}

#enroll-vue-h5
# server {
	# listen       9535;
	# server_name  localhost;
	# root /usr/local/vue-project/enroll-h5;
	# location / {
	#		root   /usr/local/vue-project/enroll-h5;
	#		index  index.html index.htm;
	# }
	# error_page   500 502 503 504  /50x.html;
	# location = /50x.html {
	#		root   html;
	# }
# }

#test-vue
server {
	listen       9588;
	server_name  localhost;
	root /usr/local/vue-project/test;
	location / {
			root   /usr/local/vue-project/test;
			index  index.html index.htm;
	}
	error_page   500 502 503 504  /50x.html;
	location = /50x.html {
			root   html;
	}
}

#lapp-paa-vue
server {
	listen       9524;
	server_name  localhost;
	root /usr/local/vue-project/lapp-paas;
	location / {
			root   /usr/local/vue-project/lapp-paas;
			index  index.html index.htm;
	}
	error_page   500 502 503 504  /50x.html;
	location = /50x.html {
			root   html;
	}
}

#lapp-paa-vue-h5
server {
        listen       9520;
        server_name  localhost;
        root /usr/local/vue-project/lapp-paas-h5;
        location / {    
                        root   /usr/local/vue-project/lapp-paas-h5;
                        index  index.html index.htm;
        }
        error_page   500 502 503 504  /50x.html;
        location = /50x.html { 
                        root   html;
        }
}

#hy-bi
server {
        listen       9633;
        server_name  localhost;
        root /usr/local/vue-project/hy-bi;
        location / {    
                        root   /usr/local/vue-project/hy-bi;
                        index  index.html index.htm;
        }
        error_page   500 502 503 504  /50x.html;
        location = /50x.html { 
                        root   html;
        }
}

server {
	listen       80;
	server_name  i.haiyanproduct.com;
	rewrite ^(.*) https://$server_name$1 permanent;	
}

server {
	listen       443        ssl;
	server_name  i.haiyanproduct.com;
	ssl_certificate /usr/local/openresty/nginx/conf/cert/8462504_i.haiyanproduct.com.pem;
	ssl_certificate_key /usr/local/openresty/nginx/conf/cert/8462504_i.haiyanproduct.com.key;
	ssl_session_timeout 5m;
	ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
	ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;
	ssl_prefer_server_ciphers on;
	location / {
		index index.jsp;
		proxy_pass http://portal-vue/;
		proxy_connect_timeout 60s;
		proxy_read_timeout 5400s;
		proxy_send_timeout 5400s;
		proxy_set_header Host  $http_host;
		proxy_set_header Cookie $http_cookie;
		proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header X-Forwarded-Proto  $scheme;
	}

	location /admin {
		index index.jsp;
		proxy_pass http://admin-vue/;
		proxy_connect_timeout 60s;
		proxy_read_timeout 5400s;
		proxy_send_timeout 5400s;
		proxy_set_header Host  $http_host;
		proxy_set_header Cookie $http_cookie;
		proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header X-Forwarded-Proto  $scheme;
	}
	location /data {
		index index.jsp;
		proxy_pass http://data-vue/;
		proxy_connect_timeout 60s;
		proxy_read_timeout 5400s;
		proxy_send_timeout 5400s;
		proxy_set_header Host  $http_host;
		proxy_set_header Cookie $http_cookie;
		proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header X-Forwarded-Proto  $scheme;
	}
	location /table {
		index index.jsp;
		proxy_pass http://table-vue/;
		proxy_connect_timeout 60s;
		proxy_read_timeout 5400s;
		proxy_send_timeout 5400s;
		proxy_set_header Host  $http_host;
		proxy_set_header Cookie $http_cookie;
		proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header X-Forwarded-Proto  $scheme;
	}
	location /test {
		index index.jsp;
		proxy_pass http://test-vue/;
		proxy_connect_timeout 60s;
		proxy_read_timeout 5400s;
		proxy_send_timeout 5400s;
		proxy_set_header Host  $http_host;
		proxy_set_header Cookie $http_cookie;
		proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header X-Forwarded-Proto  $scheme;
	}
	location /bi {
		index index.jsp;
		proxy_pass http://bi-vue/;
		proxy_connect_timeout 60s;
		proxy_read_timeout 5400s;
		proxy_send_timeout 5400s;
		proxy_set_header Host  $http_host;
		proxy_set_header Cookie $http_cookie;
		proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header X-Forwarded-Proto  $scheme;
	}
	location /biarea {
		index index.jsp;
		proxy_pass http://biarea-vue/;
		proxy_connect_timeout 60s;
		proxy_read_timeout 5400s;
		proxy_send_timeout 5400s;
		proxy_set_header Host  $http_host;
		proxy_set_header Cookie $http_cookie;
		proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header X-Forwarded-Proto  $scheme;
	}
location /hybi{
		index index.jsp;
		proxy_pass http://hy-bi/;
		proxy_connect_timeout 60s;
		proxy_read_timeout 5400s;
		proxy_send_timeout 5400s;
		proxy_set_header Host  $http_host;
		proxy_set_header Cookie $http_cookie;
		proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header X-Forwarded-Proto  $scheme;
	}
	location /report {
		index index.jsp;
		proxy_pass http://report-vue1/;
		proxy_connect_timeout 60s;
		proxy_read_timeout 5400s;
		proxy_send_timeout 5400s;
		proxy_set_header Host  $http_host;
		proxy_set_header Cookie $http_cookie;
		proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header X-Forwarded-Proto  $scheme;
	}
	location /enroll {
		index index.jsp;
		proxy_pass http://enroll-vue/;
		proxy_connect_timeout 60s;
		proxy_read_timeout 5400s;
		proxy_send_timeout 5400s;
		proxy_set_header Host  $http_host;
		proxy_set_header Cookie $http_cookie;
		proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header X-Forwarded-Proto  $scheme;
	}
	# location /enroll-h5 {
    # 	index index.jsp;
    # 	proxy_pass http://enroll-vue-h5/;
    # 	proxy_connect_timeout 60s;
    # 	proxy_read_timeout 5400s;
    # 	proxy_send_timeout 5400s;
    # 	proxy_set_header Host  $http_host;
    # 	proxy_set_header Cookie $http_cookie;
    # 	proxy_set_header X-Real-IP $remote_addr;
    # 	proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    # 	proxy_set_header X-Forwarded-Proto  $scheme;
    # }

	location /cas {
		index index.jsp;
		proxy_pass http://cas-server;
		proxy_connect_timeout 60s;
		proxy_read_timeout 5400s;
		proxy_send_timeout 5400s;
		proxy_set_header Host  $http_host;
		proxy_set_header Cookie $http_cookie;
		proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header X-Forwarded-Proto  $scheme;
	}

	location /rest/report {
		proxy_pass http://bi-server;
		proxy_set_header Host  $http_host;
		proxy_set_header Cookie $http_cookie;
		proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header X-Forwarded-Proto  $scheme;
	}

	location /rest/enroll {
		proxy_pass http://enroll-server;
		proxy_set_header Host  $http_host;
		proxy_set_header Cookie $http_cookie;
		proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header X-Forwarded-Proto  $scheme;
	}

	location /rest/admin {
		proxy_pass http://admin-server;
		proxy_set_header Host  $http_host;
		proxy_set_header Cookie $http_cookie;
		proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header X-Forwarded-Proto  $scheme;
	}

	location /rest/data {
		proxy_pass http://data;
		proxy_set_header Host  $http_host;
		proxy_set_header Cookie $http_cookie;
		proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header X-Forwarded-Proto  $scheme;
	}

	location /rest/compute {
                index index.jsp;
                 proxy_pass  http://compute-server;
                        proxy_connect_timeout 60s;
                        proxy_read_timeout 5400s;
                        proxy_send_timeout 5400s;
                        proxy_set_header Host  $http_host;
                        proxy_set_header Cookie $http_cookie;
                        proxy_set_header X-Real-IP $remote_addr;
                        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header X-Forwarded-Proto  $scheme;
                        proxy_http_version 1.1;
                        proxy_set_header Upgrade $http_upgrade;
                        proxy_set_header Connection "upgrade";
                }

	location /rest/table {
		proxy_pass http://table;
		proxy_set_header Host  $http_host;
		proxy_set_header Cookie $http_cookie;
		proxy_set_header X-Real-IP $remote_addr;
		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
		proxy_set_header X-Forwarded-Proto  $scheme;
	}
	
	location /paas {
			proxy_pass http://paas-vue/;
			proxy_set_header Host  $http_host;
			proxy_set_header Cookie $http_cookie;
			proxy_set_header X-Real-IP $remote_addr;
			proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
			proxy_set_header X-Forwarded-Proto  $scheme;
	}
	
	location /paas-h5 {
                        proxy_pass http://paas-vue-h5//;
                        proxy_set_header Host  $http_host;
                        proxy_set_header Cookie $http_cookie;
                        proxy_set_header X-Real-IP $remote_addr;
                        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                        proxy_set_header X-Forwarded-Proto  $scheme;
        }	

	location /rest/paas {
			proxy_pass http://paas-server;
			proxy_set_header Host  $http_host;
			proxy_set_header Cookie $http_cookie;
			proxy_set_header X-Real-IP $remote_addr;
			proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
			proxy_set_header X-Forwarded-Proto  $scheme;
	}
	
	location ~^/paas-swagger/(.*) {
                proxy_pass http://paas-server/$1;
                proxy_set_header Host  $http_host;
                proxy_set_header Cookie $http_cookie;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header X-Forwarded-Proto  $scheme;
        }
	
	include /usr/local/openresty/nginx/conf/conf.d/haiyanproduct.com/i.location.1.config;
		
	location /YnOKpe1MQf.txt{
            index   YnOKpe1MQf.txt;
			alias   /usr/local/openresty/nginx/conf/xcx/YnOKpe1MQf.txt;
        }
        location /WW_verify_4KeO9C1XvVxkaTLm.txt{
            index   WW_verify_4KeO9C1XvVxkaTLm.txt;
                        alias   /usr/local/openresty/nginx/conf/qywx/WW_verify_4KeO9C1XvVxkaTLm.txt;
        }
location /6aWormMiRa.txt{
            index   6aWormMiRa.txt;
                        alias   /usr/local/openresty/nginx/conf/qywx/6aWormMiRa.txt;
        }	
	error_page   500 502 503 504  /50x.html;
	location = /50x.html {
			root   html;
	}
}


